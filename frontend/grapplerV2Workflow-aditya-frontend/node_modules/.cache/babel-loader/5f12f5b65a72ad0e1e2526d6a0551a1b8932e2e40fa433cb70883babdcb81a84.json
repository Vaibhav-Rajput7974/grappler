{"ast":null,"code":"import { createSlice, current } from \"@reduxjs/toolkit\";\nimport { act } from \"react-dom/test-utils\";\nconst intialize = {\n  projects: [],\n  projectById: {\n    stageList: [] // Add this property  \n  }\n};\n\nconst ProjectSlice = createSlice({\n  name: \"ProjectSlicer\",\n  initialState: intialize,\n  reducers: {\n    getAllProject: (state, action) => {\n      state.projects = action.payload;\n    },\n    getProjectById: (state, action) => {\n      state.projectById = action.payload;\n    },\n    createProject: (state, action) => {\n      state.projects.push(action.payload);\n    },\n    addStage: (state, action) => {\n      const {\n        index,\n        data\n      } = action.payload;\n      state.projectById.stageList.push(data);\n    },\n    updateSliceStage(state, action) {\n      const {\n        index,\n        updateStage\n      } = action.payload;\n      state.projectById.stageList[index] = {\n        ...updateStage,\n        id: state.projectById.stageList[index].stageId\n      };\n    },\n    addSliceTicket(state, action) {\n      state.projectById.stageId.push(action.payload);\n    },\n    deleteStage: (state, action) => {\n      const stageIndex = action.payload;\n      console.log(stageIndex);\n      if (stageIndex !== -1) {\n        state.projectById.stageList.splice(stageIndex, 1);\n      }\n    },\n    updateStageOrder: (state, action) => {\n      const reorderedStages = action.payload;\n      state.projectById.stageList = reorderedStages;\n    },\n    updateSliceTicket: (state, action) => {\n      const {\n        previous,\n        data\n      } = action.payload;\n      if (previous !== data.stageId) {\n        // Find the index of the previous and new stages\n        const previousStageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === previous);\n        const newStageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === data.stageId);\n\n        // Find the index of the ticket in the previous stage\n        const ticketIndex = state.projectById.stageList[previousStageIndex].ticketList.findIndex(ticket => ticket.ticketId === data.ticketId);\n        if (ticketIndex !== -1) {\n          // Remove the ticket from the previous stage\n          const [movedTicket] = state.projectById.stageList[previousStageIndex].ticketList.splice(ticketIndex, 1);\n\n          // Add the ticket to the new stage\n          state.projectById.stageList[newStageIndex].ticketList.push(movedTicket);\n        }\n      }\n    },\n    addTicketToStage: (state, action) => {\n      const {\n        stageId,\n        ticketData\n      } = action.payload;\n      const stageIndex = state.projectById.stageList.filter(stage => stage.id === stageId);\n      console.log(stage);\n      state.projectById.stageList[stageIndex].tickets.push(ticketData);\n    }\n  }\n});\nexport const {\n  getAllProject,\n  getProjectById,\n  createProject,\n  addStage,\n  deleteStage,\n  updateSliceStage,\n  updateSliceTicket,\n  updateStageOrder,\n  addTicketToStage\n} = ProjectSlice.actions;\nexport default ProjectSlice.reducer;","map":{"version":3,"names":["createSlice","current","act","intialize","projects","projectById","stageList","ProjectSlice","name","initialState","reducers","getAllProject","state","action","payload","getProjectById","createProject","push","addStage","index","data","updateSliceStage","updateStage","id","stageId","addSliceTicket","deleteStage","stageIndex","console","log","splice","updateStageOrder","reorderedStages","updateSliceTicket","previous","previousStageIndex","findIndex","stage","newStageIndex","ticketIndex","ticketList","ticket","ticketId","movedTicket","addTicketToStage","ticketData","filter","tickets","actions","reducer"],"sources":["C:/grapplerV2Workflow-aditya-frontend/src/slice/ProjectSlice.js"],"sourcesContent":["import { createSlice, current } from \"@reduxjs/toolkit\";\nimport { act } from \"react-dom/test-utils\";\nconst intialize = {\n  projects: [],\n  projectById: {\n    stageList: [], // Add this property  \n  },\n};\n\nconst ProjectSlice = createSlice({\n  name: \"ProjectSlicer\",\n  initialState: intialize,\n  reducers: {\n    getAllProject: (state, action) => {\n      state.projects = action.payload;\n    },\n    getProjectById: (state, action) => {\n      state.projectById = action.payload;\n    },\n    createProject: (state, action) => {\n      state.projects.push(action.payload);\n    },\n    addStage: (state, action) => {\n      const { index, data } = action.payload;\n      state.projectById.stageList.push(data);\n    },\n    updateSliceStage(state, action) {\n      const { index, updateStage } = action.payload;\n      state.projectById.stageList[index] = {\n        ...updateStage,\n        id: state.projectById.stageList[index].stageId,\n      };\n    },\n    addSliceTicket(state, action) {\n      state.projectById.stageId.push(action.payload);\n    },\n    deleteStage: (state, action) => {\n      const stageIndex = action.payload;\n      console.log(stageIndex);\n      if (stageIndex !== -1) {\n        state.projectById.stageList.splice(stageIndex, 1);\n      }\n    },\n    updateStageOrder: (state, action) => {\n      const reorderedStages = action.payload;\n      state.projectById.stageList = reorderedStages;\n    },\n    updateSliceTicket: (state, action) => {\n      const { previous, data } = action.payload;\n      if (previous !== data.stageId) {\n        // Find the index of the previous and new stages\n        const previousStageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === previous);\n        const newStageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === data.stageId);\n\n        // Find the index of the ticket in the previous stage\n        const ticketIndex = state.projectById.stageList[previousStageIndex].ticketList.findIndex(ticket => ticket.ticketId === data.ticketId);\n\n        if (ticketIndex !== -1) {\n          // Remove the ticket from the previous stage\n          const [movedTicket] = state.projectById.stageList[previousStageIndex].ticketList.splice(ticketIndex, 1);\n\n          // Add the ticket to the new stage\n          state.projectById.stageList[newStageIndex].ticketList.push(movedTicket);\n        }\n      }\n    },\n    addTicketToStage: (state, action) => {\n      const { stageId, ticketData } = action.payload;\n      const stageIndex=state.projectById.stageList.filter(stage => stage.id === stageId);\n      console.log(stage);\n      state.projectById.stageList[stageIndex].tickets.push(ticketData);\n    },\n  },\n});\nexport const {\n  getAllProject,\n  getProjectById,\n  createProject,\n  addStage,\n  deleteStage,\n  updateSliceStage,\n  updateSliceTicket,\n  updateStageOrder,\n  addTicketToStage,\n} = ProjectSlice.actions;\nexport default ProjectSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}