{"ast":null,"code":"import { createSlice, current } from \"@reduxjs/toolkit\";\nimport { act } from \"react-dom/test-utils\";\nconst intialize = {\n  projects: [],\n  projectById: {\n    stageList: [] // Add this property  \n  }\n};\n\nconst ProjectSlice = createSlice({\n  name: \"ProjectSlicer\",\n  initialState: intialize,\n  reducers: {\n    getAllProject: (state, action) => {\n      state.projects = action.payload;\n    },\n    getProjectById: (state, action) => {\n      state.projectById = action.payload;\n    },\n    createProject: (state, action) => {\n      state.projects.push(action.payload);\n    },\n    addStage: (state, action) => {\n      const {\n        index,\n        data\n      } = action.payload;\n      state.projectById.stageList.push(data);\n    },\n    updateSliceStage(state, action) {\n      const {\n        index,\n        updateStage\n      } = action.payload;\n      state.projectById.stageList[index] = {\n        ...updateStage,\n        id: state.projectById.stageList[index].stageId\n      };\n    },\n    addSliceTicket(state, action) {\n      state.projectById.stageId.push(action.payload);\n    },\n    deleteStage: (state, action) => {\n      const stageIndex = action.payload;\n      console.log(stageIndex);\n      if (stageIndex !== -1) {\n        state.projectById.stageList.splice(stageIndex, 1);\n      }\n    },\n    updateStageOrder: (state, action) => {\n      const reorderedStages = action.payload;\n      state.projectById.stageList = reorderedStages;\n    },\n    updateSliceTicket: (state, action) => {\n      const {\n        previous,\n        data\n      } = action.payload;\n      if (previous !== data.stageId) {\n        // Find the index of the previous and new stages\n        const previousStageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === previous);\n        const newStageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === data.stageId);\n\n        // Find the index of the ticket in the previous stage\n        const ticketIndex = state.projectById.stageList[previousStageIndex].ticketList.findIndex(ticket => ticket.ticketId === data.ticketId);\n        if (ticketIndex !== -1) {\n          // Remove the ticket from the previous stage\n          const [movedTicket] = state.projectById.stageList[previousStageIndex].ticketList.splice(ticketIndex, 1);\n\n          // Add the ticket to the new stage\n          state.projectById.stageList[newStageIndex].ticketList.push(data);\n        }\n      } else {\n        const previousStageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === previous);\n        state.projectById.stageList[previousStageIndex].ticketList;\n      }\n    },\n    addTicketToStage: (state, action) => {\n      const {\n        stageId,\n        ticketData\n      } = action.payload;\n      const stageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === stageId);\n      state.projectById.stageList[stageIndex].ticketList.push(ticketData);\n    }\n  }\n});\nexport const {\n  getAllProject,\n  getProjectById,\n  createProject,\n  addStage,\n  deleteStage,\n  updateSliceStage,\n  updateSliceTicket,\n  updateStageOrder,\n  addTicketToStage\n} = ProjectSlice.actions;\nexport default ProjectSlice.reducer;","map":{"version":3,"names":["createSlice","current","act","intialize","projects","projectById","stageList","ProjectSlice","name","initialState","reducers","getAllProject","state","action","payload","getProjectById","createProject","push","addStage","index","data","updateSliceStage","updateStage","id","stageId","addSliceTicket","deleteStage","stageIndex","console","log","splice","updateStageOrder","reorderedStages","updateSliceTicket","previous","previousStageIndex","findIndex","stage","newStageIndex","ticketIndex","ticketList","ticket","ticketId","movedTicket","addTicketToStage","ticketData","actions","reducer"],"sources":["C:/grapplerV2Workflow-aditya-frontend/src/slice/ProjectSlice.js"],"sourcesContent":["import { createSlice, current } from \"@reduxjs/toolkit\";\r\nimport { act } from \"react-dom/test-utils\";\r\nconst intialize = {\r\n  projects: [],\r\n  projectById: {\r\n    stageList: [], // Add this property  \r\n  },\r\n};\r\n\r\nconst ProjectSlice = createSlice({\r\n  name: \"ProjectSlicer\",\r\n  initialState: intialize,\r\n  reducers: {\r\n    getAllProject: (state, action) => {\r\n      state.projects = action.payload;\r\n    },\r\n    getProjectById: (state, action) => {\r\n      state.projectById = action.payload;\r\n    },\r\n    createProject: (state, action) => {\r\n      state.projects.push(action.payload);\r\n    },\r\n    addStage: (state, action) => {\r\n      const { index, data } = action.payload;\r\n      state.projectById.stageList.push(data);\r\n    },\r\n    updateSliceStage(state, action) {\r\n      const { index, updateStage } = action.payload;\r\n      state.projectById.stageList[index] = {\r\n        ...updateStage,\r\n        id: state.projectById.stageList[index].stageId,\r\n      };\r\n    },\r\n    addSliceTicket(state, action) {\r\n      state.projectById.stageId.push(action.payload);\r\n    },\r\n    deleteStage: (state, action) => {\r\n      const stageIndex = action.payload;\r\n      console.log(stageIndex);\r\n      if (stageIndex !== -1) {\r\n        state.projectById.stageList.splice(stageIndex, 1);\r\n      }\r\n    },\r\n    updateStageOrder: (state, action) => {\r\n      const reorderedStages = action.payload;\r\n      state.projectById.stageList = reorderedStages;\r\n    },\r\n    updateSliceTicket: (state, action) => {\r\n      const { previous, data } = action.payload;\r\n      if (previous !== data.stageId) {\r\n        // Find the index of the previous and new stages\r\n        const previousStageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === previous);\r\n        const newStageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === data.stageId);\r\n\r\n        // Find the index of the ticket in the previous stage\r\n        const ticketIndex = state.projectById.stageList[previousStageIndex].ticketList.findIndex(ticket => ticket.ticketId === data.ticketId);\r\n\r\n        if (ticketIndex !== -1) {\r\n          // Remove the ticket from the previous stage\r\n          const [movedTicket] = state.projectById.stageList[previousStageIndex].ticketList.splice(ticketIndex, 1);\r\n\r\n          // Add the ticket to the new stage\r\n          state.projectById.stageList[newStageIndex].ticketList.push(data);\r\n        }\r\n      }\r\n      else{\r\n        const previousStageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === previous);\r\n        state.projectById.stageList[previousStageIndex].ticketList\r\n      }\r\n    },\r\n    addTicketToStage: (state, action) => {\r\n      const { stageId, ticketData } = action.payload;\r\n      const stageIndex = state.projectById.stageList.findIndex(stage => stage.stageId === stageId);\r\n\r\n      state.projectById.stageList[stageIndex].ticketList.push(ticketData);\r\n    },\r\n  },\r\n});\r\nexport const {\r\n  getAllProject,\r\n  getProjectById,\r\n  createProject,\r\n  addStage,\r\n  deleteStage,\r\n  updateSliceStage,\r\n  updateSliceTicket,\r\n  updateStageOrder,\r\n  addTicketToStage,\r\n} = ProjectSlice.actions;\r\nexport default ProjectSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}